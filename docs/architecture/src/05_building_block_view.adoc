ifndef::imagesdir[:imagesdir: ../images]

[[section-building-block-view]]
== Building Block View

This section describes the high-level building blocks of the `headsetcontrol-tray` application.

=== Component Diagram

The following diagram shows the main components of the application and their dependencies.

[mermaid, target="component-diagram", format="svg"]
....
graph TD
    subgraph "User Interface"
        A[System Tray Icon]
        B[Settings Dialog]
        C[Equalizer Editor]
        D[Chatmix Manager]
    end

    subgraph "Application Logic"
        E[App]
        F[Headset Service]
        G[Config Manager]
    end

    subgraph "Hardware Abstraction"
        H[HID Manager]
        I[HID Communicator]
        J[OS Layer]
    end

    A --> E
    B --> E
    C --> B
    D --> B
    E --> F
    E --> G
    F --> H
    H --> I
    H --> J
....

=== Component Descriptions

*   **System Tray Icon:** The main entry point for the user. It provides a menu with quick actions and a way to open the settings dialog.
*   **Settings Dialog:** The main window for configuring the application and the headset. It contains tabs for different settings categories.
*   **Equalizer Editor:** A widget for creating and editing equalizer presets.
*   **Chatmix Manager:** A widget for managing the chatmix feature.
*   **App:** The main application class. It initializes the other components and handles the application lifecycle.
*   **Headset Service:** The core component of the application. It manages the connection to the headset, sends commands, and receives status updates.
*   **Config Manager:** A component for loading and saving user settings and headset configurations.
*   **HID Manager:** A component for detecting and connecting to HID devices. It uses the OS layer to interact with the operating system's device management capabilities.
*   **HID Communicator:** A low-level component for sending and receiving HID reports. It uses the `hidapi` library to communicate with the headset.
*   **OS Layer:** An abstraction layer that isolates platform-specific code. It provides a consistent interface for interacting with the operating system's device management and other features.
